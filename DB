CREATE TABLE `account` (
  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `ACCOUNT_UNIQUE` VARCHAR(255) NOT NULL,
  `NAME` VARCHAR(255) NOT NULL,
  `WEBSITE` VARCHAR(255),
  `ADDRESS` TEXT,
  `PHONE` VARCHAR(63),
  `CREATED_AT` datetime NOT NULL,
  `ADMIN_ID` BIGINT(20) UNSIGNED,
  PRIMARY KEY (`ID`),
  UNIQUE KEY (`ACCOUNT_UNIQUE`),
  KEY `FK_USER_ADMIN_ID` (`ADMIN_ID`),
  CONSTRAINT `FK_USER_ADMIN_ID` FOREIGN KEY (`ADMIN_ID`) 
  REFERENCES `user` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

CREATE TABLE `user` (
  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `USER_UNIQUE` VARCHAR(255) NOT NULL,
  `FULL_NAME` VARCHAR(63) NOT NULL,
  `EMAIL` VARCHAR(63) NOT NULL,
  `PASSWORD` VARCHAR(255) NOT NULL,
  `SALT` VARCHAR(255) NOT NULL,
  `CREATED_AT` datetime NOT NULL,
  `SESSIONID` VARCHAR(1023),
  `LAST_LOGIN` datetime,
  `ACCOUNT_ID` BIGINT(20) UNSIGNED,
  PRIMARY KEY (`ID`),
  UNIQUE KEY (`EMAIL`),
  KEY `FK_USER_ACCOUNT_ID` (`ACCOUNT_ID`),
  CONSTRAINT `FK_USER_ACCOUNT_ID` FOREIGN KEY (`ACCOUNT_ID`) 
  REFERENCES `account` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

CREATE TABLE `system` (
  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `SYSTEM_UNIQUE` VARCHAR(255) NOT NULL,
  `ACCOUNT_ID` BIGINT(20) NOT NULL,
  `NAME` VARCHAR(255) NOT NULL,
  `DESCRIPTION` TEXT,
  `PING_URL` VARCHAR(255) NOT NULL,
  `CREATED_AT` datetime NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY (`SYSTEM_UNIQUE`),
  KEY `FK_SYSTEM_ACCOUNT_ID` (`ACCOUNT_ID`),
  CONSTRAINT `FK_SYSTEM_ACCOUNT_ID` FOREIGN KEY (`ACCOUNT_ID`) 
  REFERENCES `account` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

CREATE TABLE `collection` (
  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `COLLECTION_UNIQUE` VARCHAR(255) NOT NULL,
  `SYSTEM_ID` VARCHAR(255) NOT NULL,
  `NAME` VARCHAR(255) NOT NULL,
  `DESCRIPTION` TEXT,
  `REQUEST_FLOW` TEXT COMMENT 'PIPE SEPERATED REQUESTS ORDER',
  `CREATED_AT` datetime NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY (`COLLECTION_UNIQUE`),
  KEY `FK_COLLECTION_SYSTEM_ID` (`SYSTEM_ID`),
  CONSTRAINT `FK_COLLECTION_SYSTEM_ID` FOREIGN KEY (`SYSTEM_ID`) 
  REFERENCES `system` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

CREATE TABLE `request` (
  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `REQUEST_UNIQUE` VARCHAR(255) NOT NULL,
  `COLLECTION_ID` VARCHAR(255) NOT NULL,
  `NAME` VARCHAR(255) NOT NULL,
  `DESCRIPTION` TEXT,
  `URL` VARCHAR(1023) NOT NULL,
  `METHOD` VARCHAR(31) NOT NULL,
  `HEADERS` TEXT,
  `DATATYPE` VARCHAR(31) NOT NULL,
  `DATA` TEXT COMMENT 'JSON OF KEY VALUE, CAN REUSE PERSISTED VALUES FROM PREVIOUS RESPONSES TOO',
  `DATAMODE` VARCHAR(31) COMMENT 'URLENCODED OR PARAMS OR RAW',
  `CREATED_AT` datetime NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY (`REQUEST_UNIQUE`),
  KEY `FK_REQUEST_COLLECTION_ID` (`COLLECTION_ID`),
  CONSTRAINT `FK_REQUEST_COLLECTION_ID` FOREIGN KEY (`COLLECTION_ID`) 
  REFERENCES `collection` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

CREATE TABLE `response` (
  `ID` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `RESPONSE_UNIQUE`  VARCHAR(255) NOT NULL,
  `REQUEST_ID` BIGINT(20) NOT NULL,
  `DATATYPE` VARCHAR(31) NOT NULL,
  `VALIDITY_RULE` TEXT COMMENT 'KEY VALUE LIKE - status, data.message, data.code, data.extra.value etc., THIS MAJORLY DEFINES RULE OF CONSISTENCY',
  `PERSISTABLE_KEYS` TEXT COMMENT 'ALL KEYS TO BE REUSED FOR NEXT REQUESTS',
  `CREATED_AT` datetime NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY (`RESPONSE_UNIQUE`),
  KEY `FK_RESPONSE_REQUEST_ID` (`REQUEST_ID`),
  CONSTRAINT `FK_RESPONSE_REQUEST_ID` FOREIGN KEY (`REQUEST_ID`) 
  REFERENCES `request` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;